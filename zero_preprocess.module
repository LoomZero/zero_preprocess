<?php

function zero_preprocess_preprocess(&$vars, $hook, $template) {
  if (!empty($template['zero']['preprocess'])) {
    /** @noinspection PhpIncludeInspection */
    include $template['zero']['preprocess'];
  }
}

function zero_preprocess_theme_registry_alter(&$theme_registry) {
  foreach ($theme_registry as $name => $item) {
    if (empty($item['path']) || empty($item['template'])) continue;

    $file = $item['path'] . '/' . $item['template'] . '.preprocess.php';
    if (is_file($file)) {
      $theme_registry[$name]['zero'] = [
        'preprocess' => $file,
      ];
    }
  }
}
